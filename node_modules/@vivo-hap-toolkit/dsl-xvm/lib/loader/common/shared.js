"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchModuleImport=searchModuleImport;var _utils=require("./utils");function frameworkInit(){global.framework={module:{base:"system",ext:"service"},reservedFeatures:[],reservedFeatureExclude:[],supportInCard:[],project:{manifestFilePath:null,featureList:[],cardFeatureList:{},module:{usedBaseAll:!1,usedExtAll:!1}}};["contact","webview","notification","media","file","storage","vibrator","calendar","shortcut","network","fetch","geolocation","request","share","clipboard","prompt","device","barcode","bluetooth","sensor","audio","package","volume","record","brightness","battery","image","cipher","sms","wifi","websocketfactory","alarm","mediaquery","resident"].forEach(e=>{global.framework.reservedFeatures.push(`${global.framework.module.base}.${e}`)}),["alipay","push","pay","share","wxpay","stats","account","wxaccount","qqaccount","wbaccount","ad","health","exchange"].forEach(e=>{global.framework.reservedFeatures.push(`${global.framework.module.ext}.${e}`)});["app","model","router"].forEach(e=>{global.framework.reservedFeatureExclude.push(`${global.framework.module.base}.${e}`)});["share","prompt","vibrator","fetch","storage","clipboard","geolocation","network","device","battery","calendar","package","app","router","cipher"].forEach(e=>{global.framework.supportInCard.push(`${global.framework.module.base}.${e}`)})}function searchModuleImport(e,r={}){const a=[],o=new RegExp(`['"]@(${global.framework.module.base}|${global.framework.module.ext}).*?['"]`,"g"),t=new RegExp(`['"]@((${global.framework.module.base}|${global.framework.module.ext}).*?)['"]`);return(e.match(o)||[]).forEach(e=>{const o=(e.match(t)||[])[1];if(o===`@${global.framework.module.base}`)global.framework.project.module.usedBaseAll=!0;else if(o===`@${global.framework.module.ext}`)global.framework.project.module.usedExtAll=!0;else if(-1!==global.framework.reservedFeatures.indexOf(o))if("card"===r.uxType){let e=global.framework.project.cardFeatureList[r.context];e||(e=global.framework.project.cardFeatureList[r.context]=[]),-1===e.indexOf(o)&&e.push(o)}else-1===global.framework.project.featureList.indexOf(o)&&global.framework.project.featureList.push(o);else r.uxType===_utils.ENTRY_TYPE.CARD&&-1===global.framework.supportInCard.indexOf(o)?a.push({reason:`WARN: 您引入了卡片中未识别的native模块：${o}`}):-1!==global.framework.reservedFeatureExclude.indexOf(o)||a.push({reason:`WARN: 您引入了未识别的native模块：${o}`})}),{fileCont:e,logFeatureList:a}}frameworkInit();
//# sourceMappingURL=shared.js.map
