"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInspectorUrl=getInspectorUrl,exports.routerConf=routerConf,exports.serverConf=serverConf,exports.getDebugInfoFromRequest=getDebugInfoFromRequest,exports.LINK_MODE=void 0;var _utils=require("../../lib/utils");const LINK_MODE={NULL:0,WIFI:1,ADB:2};function getInspectorUrl(e){const{ws:t,serverPort:r}=e;return`${`http://${(0,_utils.getServerIPAndPort)(r)}`}/inspector/inspector.html${`?ws=${encodeURI(t)}&remoteFrontend=true&dockSide=undocked`}`}function routerConf(e){return e.router.conf}function serverConf(e){return e.conf}function getClientFromRequest(e){const t=(0,_utils.getClientIPAddress)(e),r=(0,_utils.getIPv4IPAddress)(),o=e.header["device-serial-number"];let n=LINK_MODE.NULL;return"127.0.0.1"===t&&o?n=LINK_MODE.ADB:"127.0.0.1"!==t&&t!==r&&(n=LINK_MODE.WIFI),{clientIp:t,sn:o,linkMode:n}}function getDebugInfoFromRequest(e){const{sn:t,linkMode:r}=getClientFromRequest(e),{ws:o,application:n}=e.body,s=o.split(":")[1].split("/")[0];return{sn:t,linkMode:r,ws:o,application:n,devicePort:s}}exports.LINK_MODE=LINK_MODE;
//# sourceMappingURL=index.js.map
